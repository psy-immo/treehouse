\hypertarget{easy_8h}{\section{src/fca/easy.h \-File \-Reference}
\label{easy_8h}\index{src/fca/easy.\-h@{src/fca/easy.\-h}}
}


\hyperlink{easy_8h}{easy.\-h}, (c) 2013, \-Immanuel \-Albrecht; \-Dresden \-University of \-Technology, \-Professur für die \-Psychologie des \-Lernen und \-Lehrens  


{\ttfamily \#include $<$inttypes.\-h$>$}\*
{\ttfamily \#include \char`\"{}common.\-h\char`\"{}}\*
{\ttfamily \#include \char`\"{}easy/macros.\-h\char`\"{}}\*
{\ttfamily \#include \char`\"{}easy/measurement.\-h\char`\"{}}\*
\-Include dependency graph for easy.\-h\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{easy_8h__incl}
\end{center}
\end{figure}
\-This graph shows which files directly or indirectly include this file\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{easy_8h__dep__incl}
\end{center}
\end{figure}
\subsection*{\-Data \-Structures}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structsFormalIntent}{s\-Formal\-Intent}
\begin{DoxyCompactList}\small\item\em intent structure of a formal concept \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{\-Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef int8\-\_\-t \hyperlink{easy_8h_a92fa84ef7a12663bb998f141ab729056}{\-Incidence\-Cell}
\begin{DoxyCompactList}\small\item\em type of the incidence relation matrix cells \end{DoxyCompactList}\item 
typedef struct \hyperlink{safeguard_8h_acb2286fcdcd7730dc267d726fa84305b}{s\-Formal\-Context} $\ast$ \hyperlink{easy_8h_ad53dc3fc96151a44387245e6481f95a4}{\-Formal\-Context}
\item 
typedef struct \hyperlink{structsFormalIntent}{s\-Formal\-Intent} \hyperlink{easy_8h_a78ba8f8456c0a3d9a891d93945f2664b}{\-Formal\-Intent}
\begin{DoxyCompactList}\small\item\em intent structure of a formal concept \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{\-Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{easy_8h_ad53dc3fc96151a44387245e6481f95a4}{\-Formal\-Context} \hyperlink{easy_8h_a8cc0086fc3f45b783688b21105632456}{new\-Formal\-Context} (int objects, int attributes)
\begin{DoxyCompactList}\small\item\em create a new formal context \end{DoxyCompactList}\item 
\hyperlink{easy_8h_ad53dc3fc96151a44387245e6481f95a4}{\-Formal\-Context} \hyperlink{easy_8h_ae3105d9c1d91e1816c8b7a83d3414790}{new\-Formal\-Context\-From\-Random} (int objects, int attributes, float p)
\begin{DoxyCompactList}\small\item\em create a new formal context with random incidence relation \end{DoxyCompactList}\item 
\hyperlink{easy_8h_ad53dc3fc96151a44387245e6481f95a4}{\-Formal\-Context} \hyperlink{easy_8h_af3e05ebca016a7d4d09b332eac01a456}{new\-Formal\-Context\-From\-File} (const char $\ast$filename)
\begin{DoxyCompactList}\small\item\em create a new formal context object from a .cxt file \end{DoxyCompactList}\item 
int \hyperlink{easy_8h_aaf6da61c84352d127039536dd6e790b6}{count\-Context\-Concepts} (\hyperlink{easy_8h_ad53dc3fc96151a44387245e6481f95a4}{\-Formal\-Context} ctx)
\begin{DoxyCompactList}\small\item\em counts the concepts in the concept lattice of ctx, using next closure algorithm \end{DoxyCompactList}\item 
void \hyperlink{easy_8h_a064800878bf96c6398d2f716609df081}{write\-Formal\-Context} (\hyperlink{easy_8h_ad53dc3fc96151a44387245e6481f95a4}{\-Formal\-Context} ctx, const char $\ast$filename)
\begin{DoxyCompactList}\small\item\em save the context ctx at the given file location \end{DoxyCompactList}\item 
void \hyperlink{easy_8h_a9835be78a56a9eaec5346a86562f10c3}{delete\-Formal\-Context} (\hyperlink{easy_8h_ad53dc3fc96151a44387245e6481f95a4}{\-Formal\-Context} $\ast$ctx)
\begin{DoxyCompactList}\small\item\em deletes the formal context $\ast$ctx, and sets the pointer to zero \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{\-Detailed \-Description}
\hyperlink{easy_8h}{easy.\-h}, (c) 2013, \-Immanuel \-Albrecht; \-Dresden \-University of \-Technology, \-Professur für die \-Psychologie des \-Lernen und \-Lehrens \-This program is free software\-: you can redistribute it and/or modify it under the terms of the \-G\-N\-U \-General \-Public \-License as published by the \-Free \-Software \-Foundation, either version 3 of the \-License, or (at your option) any later version.

\-This program is distributed in the hope that it will be useful, but \-W\-I\-T\-H\-O\-U\-T \-A\-N\-Y \-W\-A\-R\-R\-A\-N\-T\-Y; without even the implied warranty of \-M\-E\-R\-C\-H\-A\-N\-T\-A\-B\-I\-L\-I\-T\-Y or \-F\-I\-T\-N\-E\-S\-S \-F\-O\-R \-A \-P\-A\-R\-T\-I\-C\-U\-L\-A\-R \-P\-U\-R\-P\-O\-S\-E. \-See the \-G\-N\-U \-General \-Public \-License for more details.

\-You should have received a copy of the \-G\-N\-U \-General \-Public \-License along with this program. \-If not, see $<$\href{http://www.gnu.org/licenses/}{\tt http\-://www.\-gnu.\-org/licenses/}$>$.

\-This header file provides interfaces with the easy \-Incidence\-Cell$\ast$ implementations 

\-Definition in file \hyperlink{easy_8h_source}{easy.\-h}.



\subsection{\-Typedef \-Documentation}
\hypertarget{easy_8h_ad53dc3fc96151a44387245e6481f95a4}{\index{easy.\-h@{easy.\-h}!\-Formal\-Context@{\-Formal\-Context}}
\index{\-Formal\-Context@{\-Formal\-Context}!easy.h@{easy.\-h}}
\subsubsection[{\-Formal\-Context}]{\setlength{\rightskip}{0pt plus 5cm}typedef struct {\bf s\-Formal\-Context}$\ast$ {\bf \-Formal\-Context}}}\label{easy_8h_ad53dc3fc96151a44387245e6481f95a4}


\-Definition at line 42 of file easy.\-h.

\hypertarget{easy_8h_a78ba8f8456c0a3d9a891d93945f2664b}{\index{easy.\-h@{easy.\-h}!\-Formal\-Intent@{\-Formal\-Intent}}
\index{\-Formal\-Intent@{\-Formal\-Intent}!easy.h@{easy.\-h}}
\subsubsection[{\-Formal\-Intent}]{\setlength{\rightskip}{0pt plus 5cm}typedef struct {\bf s\-Formal\-Intent}  {\bf \-Formal\-Intent}}}\label{easy_8h_a78ba8f8456c0a3d9a891d93945f2664b}


intent structure of a formal concept 

\hypertarget{easy_8h_a92fa84ef7a12663bb998f141ab729056}{\index{easy.\-h@{easy.\-h}!\-Incidence\-Cell@{\-Incidence\-Cell}}
\index{\-Incidence\-Cell@{\-Incidence\-Cell}!easy.h@{easy.\-h}}
\subsubsection[{\-Incidence\-Cell}]{\setlength{\rightskip}{0pt plus 5cm}typedef int8\-\_\-t {\bf \-Incidence\-Cell}}}\label{easy_8h_a92fa84ef7a12663bb998f141ab729056}


type of the incidence relation matrix cells 



\-Definition at line 35 of file easy.\-h.



\subsection{\-Function \-Documentation}
\hypertarget{easy_8h_aaf6da61c84352d127039536dd6e790b6}{\index{easy.\-h@{easy.\-h}!count\-Context\-Concepts@{count\-Context\-Concepts}}
\index{count\-Context\-Concepts@{count\-Context\-Concepts}!easy.h@{easy.\-h}}
\subsubsection[{count\-Context\-Concepts}]{\setlength{\rightskip}{0pt plus 5cm}int {\bf count\-Context\-Concepts} (
\begin{DoxyParamCaption}
\item[{{\bf \-Formal\-Context}}]{ctx}
\end{DoxyParamCaption}
)}}\label{easy_8h_aaf6da61c84352d127039536dd6e790b6}


counts the concepts in the concept lattice of ctx, using next closure algorithm 


\begin{DoxyParams}{\-Parameters}
{\em ctx} & formal context \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{\-Returns}
number of concepts in context 
\end{DoxyReturn}


\-Definition at line 926 of file fca.\-c.



\-References smy\-Formal\-Context\-::attributes, \-C\-L\-E\-A\-R, close\-Intent, \-C\-R\-O\-S\-S, \-I\-N\-C\-I\-D\-E\-S, and \-R\-E\-T\-U\-R\-N\-\_\-\-Z\-E\-R\-O\-\_\-\-I\-F\-\_\-\-Z\-E\-R\-O.


\begin{DoxyCode}
{
    RETURN_ZERO_IF_ZERO(ctx);

    myFormalContext *c;
    c = (myFormalContext*) ctx;

    IncidenceCell *M;
    IncidenceCell *Y;

#pragma GCC diagnostic push
#pragma GCC diagnostic ignored "-Wsign-conversion"

    Y = calloc(c->attributes, sizeof(IncidenceCell));
    M = malloc(c->attributes * sizeof(IncidenceCell));

#pragma GCC diagnostic pop

    /*
     * calculate the bottom intent of the concept lattice, i.e. {}''
     */
    closeIntent(ctx, Y, M);

    int count;

    count = 1;

    /*
     * begin of nextClosure function iteration
     */
    nextClosure:

    for (int i = c->attributes - 1; i >= 0; --i)
    {

        if (!INCIDES(M[i]))
        {
            CROSS(M[i]);
            closeIntent(ctx, M, Y);

            int good;
            good = 1;

            for (int j = 0; j < i; ++j)
            {
                if (INCIDES(Y[j]))
                {
                    if (!INCIDES((M[j])))
                    {

                        good = 0;
                        break;
                    }
                }
            }
            if (good)
            {
                /*
                 * we found the next intent
                 */
                count++;

                /*
                 * continue with Y for M
                 */

                IncidenceCell *DELTA;
                DELTA = M;
                M = Y;
                Y = DELTA;
                /*
                 * do the nextClosure
                 */
                goto nextClosure;
            }
        }

        CLEAR(M[i]);
    }

    /*
     * free up memory
     */

    free(M);
    free(Y);

    return count;
}
\end{DoxyCode}
\hypertarget{easy_8h_a9835be78a56a9eaec5346a86562f10c3}{\index{easy.\-h@{easy.\-h}!delete\-Formal\-Context@{delete\-Formal\-Context}}
\index{delete\-Formal\-Context@{delete\-Formal\-Context}!easy.h@{easy.\-h}}
\subsubsection[{delete\-Formal\-Context}]{\setlength{\rightskip}{0pt plus 5cm}void {\bf delete\-Formal\-Context} (
\begin{DoxyParamCaption}
\item[{{\bf \-Formal\-Context} $\ast$}]{ctx}
\end{DoxyParamCaption}
)}}\label{easy_8h_a9835be78a56a9eaec5346a86562f10c3}


deletes the formal context $\ast$ctx, and sets the pointer to zero 


\begin{DoxyParams}{\-Parameters}
{\em ctx} & pointer to the formal context object to be deleted \\
\hline
\end{DoxyParams}


\-Definition at line 264 of file fca.\-c.



\-References smy\-Formal\-Context\-::attribute\-Names, smy\-Formal\-Context\-::attributes, smy\-Formal\-Context\-::incidence, smy\-Formal\-Context\-::object\-Names, smy\-Formal\-Context\-::objects, and \-R\-E\-T\-U\-R\-N\-\_\-\-I\-F\-\_\-\-Z\-E\-R\-O.


\begin{DoxyCode}
{
    RETURN_IF_ZERO(ctx);
    RETURN_IF_ZERO(*ctx);

    myFormalContext *c;

    c = (myFormalContext*) *ctx;

    *ctx = 0;

    for (int var = 0; var < c->attributes; ++var)
    {
        free(c->attributeNames[var]);
    }

    for (int var = 0; var < c->objects; ++var)
    {
        free(c->objectNames[var]);
    }

    free(c->objectNames);
    free(c->attributeNames);
    free(c->incidence);
    free(c);
}
\end{DoxyCode}
\hypertarget{easy_8h_a8cc0086fc3f45b783688b21105632456}{\index{easy.\-h@{easy.\-h}!new\-Formal\-Context@{new\-Formal\-Context}}
\index{new\-Formal\-Context@{new\-Formal\-Context}!easy.h@{easy.\-h}}
\subsubsection[{new\-Formal\-Context}]{\setlength{\rightskip}{0pt plus 5cm}{\bf \-Formal\-Context} {\bf new\-Formal\-Context} (
\begin{DoxyParamCaption}
\item[{int}]{objects, }
\item[{int}]{attributes}
\end{DoxyParamCaption}
)}}\label{easy_8h_a8cc0086fc3f45b783688b21105632456}


create a new formal context 


\begin{DoxyParams}{\-Parameters}
{\em objects} & object count \\
\hline
{\em attributes} & attribute count \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{\-Returns}
a new \-Formal\-Context object 
\end{DoxyReturn}


\-Definition at line 38 of file fca.\-c.



\-References smy\-Formal\-Context\-::attribute\-Names, smy\-Formal\-Context\-::attributes, smy\-Formal\-Context\-::incidence, smy\-Formal\-Context\-::object\-Names, and smy\-Formal\-Context\-::objects.


\begin{DoxyCode}
{
    myFormalContext *ctx = malloc(sizeof(myFormalContext));

    ctx->attributes = attributes;
    ctx->objects = objects;

#pragma GCC diagnostic push
#pragma GCC diagnostic ignored "-Wsign-conversion"

    ctx->attributeNames = calloc(attributes, sizeof(char*));
    ctx->objectNames = calloc(objects, sizeof(char*));

#pragma GCC diagnostic pop

    for (int var = 0; var < attributes; ++var)
    {
        ctx->attributeNames[var] = calloc(1, sizeof(char));
    }

    for (int var = 0; var < objects; ++var)
    {
        ctx->objectNames[var] = calloc(1, sizeof(char));
    }

#pragma GCC diagnostic push
#pragma GCC diagnostic ignored "-Wsign-conversion"

    ctx->incidence = calloc(objects * attributes, sizeof(IncidenceCell));

#pragma GCC diagnostic pop

    return (FormalContext) ctx;
}
\end{DoxyCode}
\hypertarget{easy_8h_af3e05ebca016a7d4d09b332eac01a456}{\index{easy.\-h@{easy.\-h}!new\-Formal\-Context\-From\-File@{new\-Formal\-Context\-From\-File}}
\index{new\-Formal\-Context\-From\-File@{new\-Formal\-Context\-From\-File}!easy.h@{easy.\-h}}
\subsubsection[{new\-Formal\-Context\-From\-File}]{\setlength{\rightskip}{0pt plus 5cm}{\bf \-Formal\-Context} {\bf new\-Formal\-Context\-From\-File} (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{filename}
\end{DoxyParamCaption}
)}}\label{easy_8h_af3e05ebca016a7d4d09b332eac01a456}


create a new formal context object from a .cxt file 


\begin{DoxyParams}{\-Parameters}
{\em filename} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{\-Returns}
the formal context that has been read from the given file 
\end{DoxyReturn}


\-Definition at line 80 of file fca.\-c.



\-References smy\-Formal\-Context\-::attribute\-Names, \-C\-E\-L\-L, \-C\-R\-O\-S\-S, \-I\-N\-P\-U\-T\-B\-U\-F\-F\-E\-R\-S\-I\-Z\-E, \-M\-I\-N, new\-Formal\-Context, smy\-Formal\-Context\-::object\-Names, and \-R\-E\-T\-U\-R\-N\-\_\-\-Z\-E\-R\-O\-\_\-\-I\-F\-\_\-\-Z\-E\-R\-O.


\begin{DoxyCode}
{
    char *line;
    size_t len;

    len = (INPUTBUFFERSIZE);
    line = malloc(sizeof(char) * len);

    FILE *file;

    if (strcmp(filename, "-") == 0)
    {
        file = stdin;
    }
    else
    {
        file = fopen(filename, "r");
        RETURN_ZERO_IF_ZERO(file);
    }

    ssize_t read;

    int line_nbr;
    line_nbr = 0;

    int objects;
    int attributes;

    attributes = 0;
    objects = 0;

    myFormalContext *ctx;
    ctx = 0;

    while ((read = getline(&line, &len, file)) != -1)
    {

        /*
         * this should never happen, right?
         */
        if (read == 0)
            break;
        line[read - 1] = 0;

        if (line_nbr == 0)
        {
            if (strcmp(line, "B"))
            {
                fprintf(stderr, "File '%s' is not a .cxt file\n", filename);
                goto grace;
            }
        }
        else if (line_nbr == 1)
        {
            //empty line
        }
        else if (line_nbr == 2)
        {
            objects = atoi(line);
        }
        else if (line_nbr == 3)
        {
            attributes = atoi(line);
            ctx = (myFormalContext *) newFormalContext(objects, attributes);
        }
        else if (line_nbr == 4)
        {
            //empty line
        }
        else if (line_nbr < objects + 5)
        {

            int i;
            i = line_nbr - 5;

            free(ctx->objectNames[i]);
            ctx->objectNames[i] = strdup(line);

        }
        else if (line_nbr < objects + attributes + 5)
        {
            int i;
            i = line_nbr - 5 - objects;

            free(ctx->attributeNames[i]);
            ctx->attributeNames[i] = strdup(line);
        }
        else if (line_nbr < objects * 2 + attributes + 5)
        {
            int i;
            i = line_nbr - 5 - objects - attributes;

            int width;
            width = MIN((signed)strlen(line),attributes);

            for (int var = 0; var < width; ++var)
            {
                if ((line[var] == 'x') || (line[var] == 'X')
                        || (line[var] == '1'))
                {
                    CROSS(CELL (i, ctx, var));
                }
            }

        }
        else
        {
            /*
             * we read all data
             */
            break;
        }

        line_nbr++;
    }

    /*
     * free memory and return
     */

    grace: if (file != stdin)
    {
        fclose(file);
    }

    free(line);

    return (FormalContext) ctx;
}
\end{DoxyCode}
\hypertarget{easy_8h_ae3105d9c1d91e1816c8b7a83d3414790}{\index{easy.\-h@{easy.\-h}!new\-Formal\-Context\-From\-Random@{new\-Formal\-Context\-From\-Random}}
\index{new\-Formal\-Context\-From\-Random@{new\-Formal\-Context\-From\-Random}!easy.h@{easy.\-h}}
\subsubsection[{new\-Formal\-Context\-From\-Random}]{\setlength{\rightskip}{0pt plus 5cm}{\bf \-Formal\-Context} {\bf new\-Formal\-Context\-From\-Random} (
\begin{DoxyParamCaption}
\item[{int}]{objects, }
\item[{int}]{attributes, }
\item[{float}]{p}
\end{DoxyParamCaption}
)}}\label{easy_8h_ae3105d9c1d91e1816c8b7a83d3414790}


create a new formal context with random incidence relation 


\begin{DoxyParams}{\-Parameters}
{\em objects} & \\
\hline
{\em attributes} & \\
\hline
{\em p} & probability of a cross \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{\-Returns}
context 
\end{DoxyReturn}


\-Definition at line 798 of file fca.\-c.



\-References smy\-Formal\-Context\-::attributes, \-C\-E\-L\-L, \-C\-R\-O\-S\-S, new\-Formal\-Context, and smy\-Formal\-Context\-::objects.


\begin{DoxyCode}
{
    FormalContext ctx;
    ctx = newFormalContext(objects, attributes);

    myFormalContext *c;

    c = (myFormalContext*) ctx;

    for (int g = 0; g < c->objects; ++g)
    {
        for (int m = 0; m < c->attributes; ++m)
        {
            float x;
            x = (float) random() / (float) RAND_MAX;
            if (x >= p)
            {
                CROSS(CELL(g,c,m));
            }
        }
    }
    return ctx;
}
\end{DoxyCode}
\hypertarget{easy_8h_a064800878bf96c6398d2f716609df081}{\index{easy.\-h@{easy.\-h}!write\-Formal\-Context@{write\-Formal\-Context}}
\index{write\-Formal\-Context@{write\-Formal\-Context}!easy.h@{easy.\-h}}
\subsubsection[{write\-Formal\-Context}]{\setlength{\rightskip}{0pt plus 5cm}void {\bf write\-Formal\-Context} (
\begin{DoxyParamCaption}
\item[{{\bf \-Formal\-Context}}]{ctx, }
\item[{const char $\ast$}]{filename}
\end{DoxyParamCaption}
)}}\label{easy_8h_a064800878bf96c6398d2f716609df081}


save the context ctx at the given file location 


\begin{DoxyParams}{\-Parameters}
{\em ctx} & \\
\hline
{\em filename} & \\
\hline
\end{DoxyParams}


\-Definition at line 216 of file fca.\-c.



\-References smy\-Formal\-Context\-::attribute\-Names, smy\-Formal\-Context\-::attributes, g\-Im, smy\-Formal\-Context\-::object\-Names, smy\-Formal\-Context\-::objects, and \-R\-E\-T\-U\-R\-N\-\_\-\-I\-F\-\_\-\-Z\-E\-R\-O.


\begin{DoxyCode}
{
    RETURN_IF_ZERO(ctx);
    RETURN_IF_ZERO(filename);

    FILE* file;
    file = fopen(filename, "w");

    RETURN_IF_ZERO(file);

    myFormalContext *c;
    c = (myFormalContext*) ctx;

    fprintf(file, "B\n\n%d\n%d\n\n", c->objects, c->attributes);

    for (int var = 0; var < c->objects; ++var)
    {
        fputs(c->objectNames[var], file);
        fputs("\n", file);
    }

    for (int var = 0; var < c->attributes; ++var)
    {
        fputs(c->attributeNames[var], file);
        fputs("\n", file);
    }

    for (int g = 0; g < c->objects; ++g)
    {
        for (int m = 0; m < c->attributes; ++m)
        {
            if ( gIm(g, c, m))
                fputs("X", file);
            else
                fputs(".", file);
        }
        fputs("\n", file);
    }

    fclose(file);
}
\end{DoxyCode}
