\hypertarget{vector_8h}{\section{src/fca/vector.h \-File \-Reference}
\label{vector_8h}\index{src/fca/vector.\-h@{src/fca/vector.\-h}}
}


\hyperlink{vector_8h}{vector.\-h}, (c) 2013, \-Immanuel \-Albrecht; \-Dresden \-University of \-Technology, \-Professur für die \-Psychologie des \-Lernen und \-Lehrens  


{\ttfamily \#include $<$inttypes.\-h$>$}\*
{\ttfamily \#include \char`\"{}common.\-h\char`\"{}}\*
{\ttfamily \#include \char`\"{}vector/macros.\-h\char`\"{}}\*
{\ttfamily \#include \char`\"{}vector/measurement.\-h\char`\"{}}\*
\-Include dependency graph for vector.\-h\-:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{vector_8h__incl}
\end{center}
\end{figure}
\-This graph shows which files directly or indirectly include this file\-:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{vector_8h__dep__incl}
\end{center}
\end{figure}
\subsection*{\-Data \-Structures}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structsFormalIntentV}{s\-Formal\-Intent\-V}
\begin{DoxyCompactList}\small\item\em intent structure of a formal concept \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{\-Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef uint64\-\_\-t $\ast$ \hyperlink{vector_8h_aae617489ac88fff15979050721fe581f}{\-Incidence\-Vector}
\begin{DoxyCompactList}\small\item\em type of compressed attribute vectors \end{DoxyCompactList}\item 
typedef struct s\-Formal\-Context\-V $\ast$ \hyperlink{vector_8h_a98aafc7ce3efff805e9add08680b731f}{\-Formal\-Context\-V}
\item 
typedef struct \hyperlink{structsFormalIntentV}{s\-Formal\-Intent\-V} \hyperlink{vector_8h_ac16f78f4584c2341c43ac5c0c3a758c8}{\-Formal\-Intent\-V}
\begin{DoxyCompactList}\small\item\em intent structure of a formal concept \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{\-Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{vector_8h_a98aafc7ce3efff805e9add08680b731f}{\-Formal\-Context\-V} \hyperlink{vector_8h_aa4f8b6d04c1fb2dd35fa8324bd383913}{new\-Formal\-Context\-V} (unsigned int objects, unsigned int attributes)
\begin{DoxyCompactList}\small\item\em create a new formal context \end{DoxyCompactList}\item 
void \hyperlink{vector_8h_a42ae183692b566f6d12c9db27e8f7ec1}{delete\-Formal\-Context\-V} (\hyperlink{vector_8h_a98aafc7ce3efff805e9add08680b731f}{\-Formal\-Context\-V} $\ast$ctx)
\begin{DoxyCompactList}\small\item\em deletes the formal context $\ast$ctx, and sets the pointer to zero \end{DoxyCompactList}\item 
void \hyperlink{vector_8h_aa4861d8f750bb9786aa32c55a683764b}{write\-Formal\-Context\-V} (\hyperlink{vector_8h_a98aafc7ce3efff805e9add08680b731f}{\-Formal\-Context\-V} ctx, const char $\ast$filename)
\begin{DoxyCompactList}\small\item\em save the context ctx at the given file location \end{DoxyCompactList}\item 
\hyperlink{vector_8h_a98aafc7ce3efff805e9add08680b731f}{\-Formal\-Context\-V} \hyperlink{vector_8h_a9b6b69f5062c68c30c5e1e6d56ea37bc}{new\-Formal\-Context\-From\-File\-V} (const char $\ast$filename)
\begin{DoxyCompactList}\small\item\em create a new formal context object from a .cxt file \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{\-Detailed \-Description}
\hyperlink{vector_8h}{vector.\-h}, (c) 2013, \-Immanuel \-Albrecht; \-Dresden \-University of \-Technology, \-Professur für die \-Psychologie des \-Lernen und \-Lehrens \-This program is free software\-: you can redistribute it and/or modify it under the terms of the \-G\-N\-U \-General \-Public \-License as published by the \-Free \-Software \-Foundation, either version 3 of the \-License, or (at your option) any later version.

\-This program is distributed in the hope that it will be useful, but \-W\-I\-T\-H\-O\-U\-T \-A\-N\-Y \-W\-A\-R\-R\-A\-N\-T\-Y; without even the implied warranty of \-M\-E\-R\-C\-H\-A\-N\-T\-A\-B\-I\-L\-I\-T\-Y or \-F\-I\-T\-N\-E\-S\-S \-F\-O\-R \-A \-P\-A\-R\-T\-I\-C\-U\-L\-A\-R \-P\-U\-R\-P\-O\-S\-E. \-See the \-G\-N\-U \-General \-Public \-License for more details.

\-You should have received a copy of the \-G\-N\-U \-General \-Public \-License along with this program. \-If not, see $<$\href{http://www.gnu.org/licenses/}{\tt http\-://www.\-gnu.\-org/licenses/}$>$.

\-This header file provides interfaces with the faster \-Incidence\-Vector implementations 

\-Definition in file \hyperlink{vector_8h_source}{vector.\-h}.



\subsection{\-Typedef \-Documentation}
\hypertarget{vector_8h_a98aafc7ce3efff805e9add08680b731f}{\index{vector.\-h@{vector.\-h}!\-Formal\-Context\-V@{\-Formal\-Context\-V}}
\index{\-Formal\-Context\-V@{\-Formal\-Context\-V}!vector.h@{vector.\-h}}
\subsubsection[{\-Formal\-Context\-V}]{\setlength{\rightskip}{0pt plus 5cm}typedef struct s\-Formal\-Context\-V$\ast$ {\bf \-Formal\-Context\-V}}}\label{vector_8h_a98aafc7ce3efff805e9add08680b731f}


\-Definition at line 44 of file vector.\-h.

\hypertarget{vector_8h_ac16f78f4584c2341c43ac5c0c3a758c8}{\index{vector.\-h@{vector.\-h}!\-Formal\-Intent\-V@{\-Formal\-Intent\-V}}
\index{\-Formal\-Intent\-V@{\-Formal\-Intent\-V}!vector.h@{vector.\-h}}
\subsubsection[{\-Formal\-Intent\-V}]{\setlength{\rightskip}{0pt plus 5cm}typedef struct {\bf s\-Formal\-Intent\-V}  {\bf \-Formal\-Intent\-V}}}\label{vector_8h_ac16f78f4584c2341c43ac5c0c3a758c8}


intent structure of a formal concept 

\hypertarget{vector_8h_aae617489ac88fff15979050721fe581f}{\index{vector.\-h@{vector.\-h}!\-Incidence\-Vector@{\-Incidence\-Vector}}
\index{\-Incidence\-Vector@{\-Incidence\-Vector}!vector.h@{vector.\-h}}
\subsubsection[{\-Incidence\-Vector}]{\setlength{\rightskip}{0pt plus 5cm}typedef uint64\-\_\-t$\ast$ {\bf \-Incidence\-Vector}}}\label{vector_8h_aae617489ac88fff15979050721fe581f}


type of compressed attribute vectors 



\-Definition at line 36 of file vector.\-h.



\subsection{\-Function \-Documentation}
\hypertarget{vector_8h_a42ae183692b566f6d12c9db27e8f7ec1}{\index{vector.\-h@{vector.\-h}!delete\-Formal\-Context\-V@{delete\-Formal\-Context\-V}}
\index{delete\-Formal\-Context\-V@{delete\-Formal\-Context\-V}!vector.h@{vector.\-h}}
\subsubsection[{delete\-Formal\-Context\-V}]{\setlength{\rightskip}{0pt plus 5cm}void {\bf delete\-Formal\-Context\-V} (
\begin{DoxyParamCaption}
\item[{{\bf \-Formal\-Context\-V} $\ast$}]{ctx}
\end{DoxyParamCaption}
)}}\label{vector_8h_a42ae183692b566f6d12c9db27e8f7ec1}


deletes the formal context $\ast$ctx, and sets the pointer to zero 


\begin{DoxyParams}{\-Parameters}
{\em ctx} & pointer to the formal context object to be deleted \\
\hline
\end{DoxyParams}


\-Definition at line 82 of file fca\-V.\-c.



\-References smy\-Formal\-Context\-V\-::attribute\-Names, smy\-Formal\-Context\-V\-::attributes, smy\-Formal\-Context\-V\-::incidence, smy\-Formal\-Context\-V\-::object\-Names, smy\-Formal\-Context\-V\-::objects, and \-R\-E\-T\-U\-R\-N\-\_\-\-I\-F\-\_\-\-Z\-E\-R\-O.


\begin{DoxyCode}
{
    RETURN_IF_ZERO(ctx);
    RETURN_IF_ZERO(*ctx);

    myFormalContextV *c;

    c = (myFormalContextV*) *ctx;

    *ctx = 0;

    for (unsigned int var = 0; var < c->attributes; ++var)
    {
        free(c->attributeNames[var]);
    }

    for (unsigned int var = 0; var < c->objects; ++var)
    {
        free(c->objectNames[var]);
    }

    free(c->objectNames);
    free(c->attributeNames);
    free(c->incidence);
    free(c);
}
\end{DoxyCode}
\hypertarget{vector_8h_a9b6b69f5062c68c30c5e1e6d56ea37bc}{\index{vector.\-h@{vector.\-h}!new\-Formal\-Context\-From\-File\-V@{new\-Formal\-Context\-From\-File\-V}}
\index{new\-Formal\-Context\-From\-File\-V@{new\-Formal\-Context\-From\-File\-V}!vector.h@{vector.\-h}}
\subsubsection[{new\-Formal\-Context\-From\-File\-V}]{\setlength{\rightskip}{0pt plus 5cm}{\bf \-Formal\-Context\-V} {\bf new\-Formal\-Context\-From\-File\-V} (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{filename}
\end{DoxyParamCaption}
)}}\label{vector_8h_a9b6b69f5062c68c30c5e1e6d56ea37bc}


create a new formal context object from a .cxt file 


\begin{DoxyParams}{\-Parameters}
{\em filename} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{\-Returns}
the formal context that has been read from the given file 
\end{DoxyReturn}
this should never happen, right?

we read all data

free memory and return

\-Definition at line 116 of file fca\-V.\-c.



\-References smy\-Formal\-Context\-V\-::attribute\-Names, \-C\-R\-O\-S\-S\-V, \-I\-N\-P\-U\-T\-B\-U\-F\-F\-E\-R\-S\-I\-Z\-E, \-M\-I\-N, new\-Formal\-Context\-V(), smy\-Formal\-Context\-V\-::object\-Names, \-R\-E\-T\-U\-R\-N\-\_\-\-Z\-E\-R\-O\-\_\-\-I\-F\-\_\-\-Z\-E\-R\-O, and \-R\-O\-W.


\begin{DoxyCode}
{
    char *line;
    size_t len;

    len = (INPUTBUFFERSIZE);
    line = malloc(sizeof(char) * len);

    FILE *file;

    if (strcmp(filename, "-") == 0)
    {
        file = stdin;
    }
    else
    {
        file = fopen(filename, "r");
        RETURN_ZERO_IF_ZERO(file);
    }

    ssize_t read;

    unsigned int line_nbr;
    line_nbr = 0;

    unsigned int objects;
    unsigned int attributes;

    attributes = 0;
    objects = 0;

    myFormalContextV *ctx;
    ctx = 0;

    while ((read = getline(&line, &len, file)) != -1)
    {

        if (read == 0)
            break;
        line[read - 1] = 0;

        if (line_nbr == 0)
        {
            if (strcmp(line, "B"))
            {
                fprintf(stderr, "File '%s' is not a .cxt file\n", filename);
                goto grace;
            }
        }
        else if (line_nbr == 1)
        {
            //empty line
        }
        else if (line_nbr == 2)
        {
#pragma GCC diagnostic push
#pragma GCC diagnostic ignored "-Wsign-conversion"
            objects = atoi(line);
#pragma GCC diagnostic pop
        }
        else if (line_nbr == 3)
        {
#pragma GCC diagnostic push
#pragma GCC diagnostic ignored "-Wsign-conversion"
            attributes = atoi(line);
            ctx = (myFormalContextV *) newFormalContextV(objects, attributes);
#pragma GCC diagnostic pop
        }
        else if (line_nbr == 4)
        {
            //empty line
        }
        else if (line_nbr < objects + 5)
        {

            unsigned int i;
            i = line_nbr - 5;

            free(ctx->objectNames[i]);
            ctx->objectNames[i] = strdup(line);

        }
        else if (line_nbr < objects + attributes + 5)
        {
            unsigned int i;
            i = line_nbr - 5 - objects;

            free(ctx->attributeNames[i]);
            ctx->attributeNames[i] = strdup(line);
        }
        else if (line_nbr < objects * 2 + attributes + 5)
        {
            unsigned int i;
            i = line_nbr - 5 - objects - attributes;

            unsigned int width;
            width = MIN((unsigned int)strlen(line),attributes);

            for (unsigned int var = 0; var < width; ++var)
            {
                if ((line[var] == 'x') || (line[var] == 'X')
                        || (line[var] == '1'))
                {
                    CROSSV(ROW(i, ctx), var);
                }
            }

        }
        else
        {
            break;
        }

        line_nbr++;
    }

    grace: if (file != stdin)
    {
        fclose(file);
    }

    free(line);

    return (FormalContextV) ctx;
}
\end{DoxyCode}


\-Here is the call graph for this function\-:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{vector_8h_a9b6b69f5062c68c30c5e1e6d56ea37bc_cgraph}
\end{center}
\end{figure}


\hypertarget{vector_8h_aa4f8b6d04c1fb2dd35fa8324bd383913}{\index{vector.\-h@{vector.\-h}!new\-Formal\-Context\-V@{new\-Formal\-Context\-V}}
\index{new\-Formal\-Context\-V@{new\-Formal\-Context\-V}!vector.h@{vector.\-h}}
\subsubsection[{new\-Formal\-Context\-V}]{\setlength{\rightskip}{0pt plus 5cm}{\bf \-Formal\-Context\-V} {\bf new\-Formal\-Context\-V} (
\begin{DoxyParamCaption}
\item[{unsigned int}]{objects, }
\item[{unsigned int}]{attributes}
\end{DoxyParamCaption}
)}}\label{vector_8h_aa4f8b6d04c1fb2dd35fa8324bd383913}


create a new formal context 


\begin{DoxyParams}{\-Parameters}
{\em objects} & object count \\
\hline
{\em attributes} & attribute count \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{\-Returns}
a new \-Formal\-Context object 
\end{DoxyReturn}


\-Definition at line 40 of file fca\-V.\-c.



\-References smy\-Formal\-Context\-V\-::attribute\-Names, smy\-Formal\-Context\-V\-::attributes, smy\-Formal\-Context\-V\-::incidence, smy\-Formal\-Context\-V\-::object\-Names, smy\-Formal\-Context\-V\-::objects, \-W\-I\-D\-T\-H, and smy\-Formal\-Context\-V\-::width.



\-Referenced by new\-Formal\-Context\-From\-File\-V().


\begin{DoxyCode}
{
    myFormalContextV *ctx = malloc(sizeof(myFormalContextV));

    ctx->attributes = attributes;
    ctx->objects = objects;
    ctx->width = WIDTH(attributes);

#pragma GCC diagnostic push
#pragma GCC diagnostic ignored "-Wsign-conversion"

    ctx->attributeNames = calloc(attributes, sizeof(char*));
    ctx->objectNames = calloc(objects, sizeof(char*));

#pragma GCC diagnostic pop

    for (unsigned int var = 0; var < attributes; ++var)
    {
        ctx->attributeNames[var] = calloc(1, sizeof(char));
    }

    for (unsigned int var = 0; var < objects; ++var)
    {
        ctx->objectNames[var] = calloc(1, sizeof(char));
    }

#pragma GCC diagnostic push
#pragma GCC diagnostic ignored "-Wsign-conversion"

    ctx->incidence = calloc(objects * ctx->width, sizeof(uint64_t));

#pragma GCC diagnostic pop

    return (FormalContextV) ctx;
}
\end{DoxyCode}
\hypertarget{vector_8h_aa4861d8f750bb9786aa32c55a683764b}{\index{vector.\-h@{vector.\-h}!write\-Formal\-Context\-V@{write\-Formal\-Context\-V}}
\index{write\-Formal\-Context\-V@{write\-Formal\-Context\-V}!vector.h@{vector.\-h}}
\subsubsection[{write\-Formal\-Context\-V}]{\setlength{\rightskip}{0pt plus 5cm}void {\bf write\-Formal\-Context\-V} (
\begin{DoxyParamCaption}
\item[{{\bf \-Formal\-Context\-V}}]{ctx, }
\item[{const char $\ast$}]{filename}
\end{DoxyParamCaption}
)}}\label{vector_8h_aa4861d8f750bb9786aa32c55a683764b}


save the context ctx at the given file location 


\begin{DoxyParams}{\-Parameters}
{\em ctx} & \\
\hline
{\em filename} & \\
\hline
\end{DoxyParams}


\-Definition at line 258 of file fca\-V.\-c.



\-References smy\-Formal\-Context\-V\-::attribute\-Names, smy\-Formal\-Context\-V\-::attributes, \-I\-N\-C\-I\-D\-E\-S\-V, smy\-Formal\-Context\-V\-::object\-Names, smy\-Formal\-Context\-V\-::objects, \-R\-E\-T\-U\-R\-N\-\_\-\-I\-F\-\_\-\-Z\-E\-R\-O, and \-R\-O\-W.


\begin{DoxyCode}
{
    RETURN_IF_ZERO(ctx);
    RETURN_IF_ZERO(filename);

    FILE* file;
    file = fopen(filename, "w");

    RETURN_IF_ZERO(file);

    myFormalContextV *c;
    c = (myFormalContextV*) ctx;

    fprintf(file, "B\n\n%zu\n%zu\n\n", c->objects, c->attributes);

    for (unsigned int var = 0; var < c->objects; ++var)
    {
        fputs(c->objectNames[var], file);
        fputs("\n", file);
    }

    for (unsigned int var = 0; var < c->attributes; ++var)
    {
        fputs(c->attributeNames[var], file);
        fputs("\n", file);
    }

    for (unsigned int g = 0; g < c->objects; ++g)
    {
        for (unsigned int m = 0; m < c->attributes; ++m)
        {
            if ( INCIDESV(ROW(g, c), m))
                fputs("X", file);
            else
                fputs(".", file);
        }
        fputs("\n", file);
    }

    fclose(file);
}
\end{DoxyCode}
